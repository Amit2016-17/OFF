<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OFF: Data Structures</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OFF
   
   </div>
   <div id="projectbrief">an Open source Finite volumes Fluid dynamics code</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>README</span></a></li>
      <li><a href="../../modules.html"><span>API</span></a></li>
      <li><a href="../../files.html"><span>Source&#160;Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d3/dfc/DataStructure.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Data Structures </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="Considerations"></a>
General Considerations</h2>
<p><em>OFF</em> data structures are based on derived typed, dynamic allocatable objects.</p>
<p>The programming style is similar to Object Oriented Programming (OOP), but it is not a fully OOP code (Fortran 2003 is not fully compliant with OOP). The programming style is based on modules: each derived type has its own module containing the definition of type (object) and the procedures and local/global variables (and parameters) to handle it. Moreover also the libraries of procedures (e.g. Runge-Kutta, WENO, mesh, fluid dynamics... procedures) are contained in modules. Everywhere is possible the procedures are nested (OOP encapsulation) into the scope where they are necessary and they are not visible outside that scope. OOP dynamic dispatching by means of generic interfaces has been used when it was considered useful. A very basic OOP inheritance is present among some derived type (e.g. boundary conditions types, vector and tensor types, fluid dynamics ones). Finally some OOP polymorphism is present.</p>
<p>The basic module that <b>all</b> other modules and programs must use it the <a class="el" href="../../da/dd4/group__IR__Precision.html">IR_Precision portable kinds library</a>. This module contains a parametric definition of portable (architecture independent) kinds for integers and reals representation. By means of this module the code uses always the same precision (with the same significant digits) for representing numbers independently on what architecture is using.</p>
<h2><a class="anchor" id="Hierarchy"></a>
Data Structures Hierarchy</h2>
<p>The underling numerical mesh adopted is a multi-blocks (presently without overlapping) structured grid. As a consequence the main data structures of <em>OFF</em> have been divided into two different types:</p>
<ul>
<li>Global level data: are data related to all grid blocks; this kind of data has <em>global</em> pertinence; there is only one global level allocated variable (instance in OOP view);</li>
<li>Block level data: are data related to only one block; this kind of data has <em>block</em> pertinence; each block has its own block level data (many instances how are the blocks).</li>
</ul>
<p>The two above data structures are defined by two derived types contained into the library <a class="el" href="../../d4/da2/classData__Type__Globals.html">Data_Type_Globals</a>. The two derived types are:</p>
<ul>
<li><a class="el" href="../../dd/dfd/group__DerivedType.html#d3/dce/structData__Type__Globals_1_1Type__Block">Data_Type_Globals::Type_Block</a>;</li>
<li><a class="el" href="../../dd/dfd/group__DerivedType.html#dd/d0c/structData__Type__Globals_1_1Type__Global">Data_Type_Globals::Type_Global</a>.</li>
</ul>
<p>Nested to these two derived types are many different kinds of data that are themselves represented by a specific derived type:</p>
<ul>
<li>Global data:<ul>
<li><a class="el" href="../../dd/dfd/group__DerivedType.html#df/df8/structData__Type__Globals_1_1Type__File__Global">Global Files data</a>: these are data related to files handling;</li>
<li><a class="el" href="../../dd/dfd/group__DerivedType.html#d4/dbd/structData__Type__Globals_1_1Type__Mesh__Global">Global Mesh data</a>: these are data related to the mesh;</li>
<li><a class="el" href="../../dd/dfd/group__DerivedType.html#db/dda/structData__Type__Globals_1_1Type__BC__Global">Global Boundary Conditions data</a>: these are data related to the boundary conditions;</li>
<li><a class="el" href="../../dd/dfd/group__DerivedType.html#d5/d53/structData__Type__Globals_1_1Type__Fluid__Global">Global Fluid Dynamics data</a>: these are data related to the fluid dynamics;</li>
</ul>
</li>
<li>Block data:<ul>
<li><a class="el" href="../../d4/da2/classData__Type__Globals.html#d9/ddc/structData__Type__Globals_1_1Type__Mesh__Block">Block Mesh data</a>: these are data related to the mesh;</li>
<li><a class="el" href="../../dd/dfd/group__DerivedType.html#d2/deb/structData__Type__Globals_1_1Type__BC__Block">Block Boundary Conditions data</a>: these are data related to the boundary conditions;</li>
<li><a class="el" href="../../dd/dfd/group__DerivedType.html#db/df1/structData__Type__Globals_1_1Type__Fluid__Block">Block Fluid Dynamics data</a>: these are data related to the fluid dynamics.</li>
</ul>
</li>
</ul>
<p>Details of the above types can be found in the <em>Application Program Interface</em> (API) documentation pages.</p>
<p>The block level data instance is allocated as a double indexed array: </p>
<div class="fragment"><pre class="fragment">type(Type_Block), allocatable:: block(:,:) ! Dimensions [1:Nb,1:Nl] being Nb the number of blocks and Nl the number of grid levels
</pre></div><p> where the inner index ranges in the blocks number while the outer index ranges in the grid (refinement) levels number. At today a bug afflicts multigrid algorithm thus the use of more different grid levels (Nl&gt;1) is not useful.</p>
<p>Inside the block level data there are a lot of dynamically allocated 3D arrays. The use of nested dynamic data needs a careful treatment of the memory allocated. For those derived types (e.g. boundary conditions and fluid dynamics types) that have dynamic data specific procedures for allocating and freeing the memory have been provided (e.g. see <a class="el" href="../../dd/d22/group__Data__Type__ConservativePublicProcedure.html#d4/d33/interfaceData__Type__Conservative_1_1free">Type Conservative freeing memory procedure</a>).</p>
<p>According to the data hierarchy there are procedures that operate on some level of data structure and other on different level. There are for example procedures operating on whole blocks of some grid level (e.g. see <a class="el" href="../../d3/d31/group__Lib__FluidynamicPublicProcedure.html#gab0878159386863d9df80b862dec04118">Lib_Fluidynamic::solve_grl</a> and <a class="el" href="../../d3/d31/group__Lib__FluidynamicPublicProcedure.html#ga3cc6f55a99802e9ba522253542e7199b">Lib_Fluidynamic::boundary_conditions</a>) and other procedures operating on only one block at time (e.g. see <a class="el" href="../../d3/d31/group__Lib__FluidynamicPublicProcedure.html#gaef4eafa99842055224e85638feb2d333">Lib_Fluidynamic::conservative2primitive</a>). </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Fri May 25 2012 09:01:24 for OFF by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
