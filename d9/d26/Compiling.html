<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OFF: Compiling Instruction</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OFF
   
   </div>
   <div id="projectbrief">an Open source Finite volumes Fluid dynamics code</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>README</span></a></li>
      <li><a href="../../modules.html"><span>API</span></a></li>
      <li><a href="../../files.html"><span>Source&#160;Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d9/d26/Compiling.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Compiling Instruction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>OFF</em> has been developed on GNU/Linux architectures.</p>
<p>Other OS are not supported (and in general there is no best alternative to GNU/Linux :-).</p>
<p>The codes provided (<em>OFF</em>, IBM and POG) have been successfully compiled with the following compilers:</p>
<ul>
<li>GNU gfortran (from version 4.6.3)</li>
<li>Intel Fortran Compiler ifort (from version 11.0)</li>
</ul>
<p>Other compilers are not supported. For the Portland Group Compiler pgf it is known the presence of problems (and lack of performance due to the dynamic data nested into derived types).</p>
<p><em>OFF</em> can run over High Performance Computing facilities. It is parallelizated by means MPI paradigm for running over large distributed memory clusters and by means OpenMP paradigm for shared memory architectures. Both the supported compilers provides OpenMP paradigm support. For MPI support a MPI implementation is necessary. <em>OFF</em> has been successfully compiled by means OpenMPI and MPCH2 implementations. In particular the supported implementations are:</p>
<ul>
<li>OpenMPI (from version 1.4.5) compiled against GNU gfortran;</li>
<li>OpenMPI (from version 1.4.5) compiled against Intel Fortran Compiler ifort;</li>
<li>MPICH2 (from version 1.4.1) compiled against GNU gfortran;</li>
<li>MPICH2 (from version 1.4.1) compiled against Intel Fortran Compiler ifort.</li>
</ul>
<p>The codes are constituted by several modules. Therefore there are many dependences. The most easy way to compile the code is to start with the provided makefile thus it is necessary that the system has "Make" program (preferably GNU make <a href="http://www.gnu.org/software/make/">http://www.gnu.org/software/make/</a>).</p>
<p>Examples of compiling are:</p>
<ul>
<li><em>OFF</em> code with default options: <div class="fragment"><pre class="fragment">  make
</pre></div></li>
<li>parallel and performance-optimized <em>OFF:</em> <div class="fragment"><pre class="fragment">  make DEBUG=no OPTIMIZE=yes OPENMP=yes MPI=yes
</pre></div></li>
<li>auxiliaries codes:<ul>
<li>IBM code with default options: <div class="fragment"><pre class="fragment">    make <a class="code" href="../../db/db0/group__Program.html#gab26dc33da06d747e4982826462b7d43a" title="IBM, Initial and Boundary conditions, Mesh generator for OFF (Open Finite volume Fluid dynamics code)...">IBM</a>
</pre></div></li>
<li>POG code with Tecplot binary library: <div class="fragment"><pre class="fragment">    make <a class="code" href="../../db/db0/group__Program.html#ga5025084443394bb3b6df20e67d964d9a" title="POG, Post-processor Output Generator for OFF (Open Finite volume Fluid dynamics code).">POG</a> TECIO=yes
</pre></div></li>
</ul>
</li>
<li>building documentation: <div class="fragment"><pre class="fragment">  make doc
</pre></div></li>
<li>cleaning the project directory: <div class="fragment"><pre class="fragment">  make cleanall
</pre></div></li>
</ul>
<p>In the following subsections there are more details of each option and rule of the provided makefile.</p>
<h2><a class="anchor" id="Makefile"></a>
Makefile</h2>
<p>The provided makefile has several options. It has one rule that prints all options available and the default settings. Typing in the shell prompt: </p>
<div class="fragment"><pre class="fragment"> make help 
</pre></div><p> the following output will be printed:</p>
<div class="fragment"><pre class="fragment"> Make options of <a class="code" href="../../db/db0/group__Program.html#ga2b9da2f4af39abe63547f8240c6e2648" title="OFF is an Open source Finite volumes Fluid dynamics code.">OFF</a> codes

 Compiler choice
  COMPILER=gnu   =&gt; GNU gfortran
  COMPILER=intel =&gt; Intel Fortran
  COMPILER=pgi   =&gt; Portland Group Fortran
  COMPILER=g95   =&gt; free g95
  COMPILER=gnu   =&gt; <span class="keywordflow">default</span>

 Compiling options
  DEBUG=yes(no)    =&gt; on(off) debug                  (default yes)
  F03STD=yes(no)   =&gt; on(off) check standard fortran (default yes)
  OPTIMIZE=yes(no) =&gt; on(off) optimization           (default no)
  OPENMP=yes(no)   =&gt; on(off) OpenMP directives      (default no)
  MPI=yes(no)      =&gt; on(off) MPI    directives      (default no)

 Preprocessing options
  R16P=yes(no) =&gt; on(off) definition of real with &quot;128 bit&quot; (default no)
  NULi=yes(no) =&gt; on(off) nullify i direction (1D or 2D)    (default no)
  NULj=yes(no) =&gt; on(off) nullify j direction (1D or 2D)    (default no)
  NULk=yes(no) =&gt; on(off) nullify k direction (1D or 2D)    (default no)
  PPL=yes(no)  =&gt; on(off) Positivity Preserving Limiter     (default no)
  WENO=WENO/WENOZ/WENOM WENO algorithm (default WENO)
   WENO  =&gt; Original Jiang-Shu
   WENOZ =&gt; Improved Borges-Carmona-Costa-Don
   WENOM =&gt; Improved Henrick-Aslam-Powers
  RECV=RECVC/RECVP reconstruction variables type (default RECVC)
   RECVC =&gt; reconstruction in (local) characteristic variables
   RECVP =&gt; reconstruction in primitive variables
  RSU=HLLCb/HLLCc/HLLCp/HLLCt/HLLCz/EXA/PVL/TR/TS/APRS/ALFR/LF/LFz/ROE Riemann solver algorithm (default HLLCp)
   HLLCb =&gt; Approximate HLLC solver using BCLC waves speed estimation
   HLLCc =&gt; Approximate HLLC solver using CVL  waves speed estimation
   HLLCp =&gt; Approximate HLLC solver using PVL  waves speed estimation
   HLLCt =&gt; Approximate HLLC solver using TR   waves speed estimation
   HLLCz =&gt; Approximate HLLC solver using Z    waves speed estimation
   EXA   =&gt; Exact solver
   PVL   =&gt; Approximate PVL solver
   TR    =&gt; Approximate TR solver
   TS    =&gt; Approximate TS solver
   APRS  =&gt; Approximate APRS solver
   ALFR  =&gt; Approximate ALFR solver
   LFp   =&gt; Approximate Lax-Friedrichs solver using PVL waves speed estimation
   LFz   =&gt; Approximate Lax-Friedrichs solver using Z   waves speed estimation
   ROE   =&gt; Approximate Roe solver
  WS=WSu/WSup Waves Speed estimation algorithm (default WSup)
   WSu  =&gt; WavesSpeed14u  or WavesSpeed1234u  algorithm
   WSup =&gt; WavesSpeed14up or WavesSpeed1234up algorithm
  SMSW=SMSWz/SMSWliu/SMSWvanleer/SMSWvanalbada/SMSWharten smoothness switchg algorithm (default SMSWz)
   SMSWz         =&gt; Riemann-solver-like algorithm
   SMSWliu       =&gt; Liu algorithm
   SMSWvanleer   =&gt; van Leer slope limiter algorithm
   SMSWvanAlbada =&gt; van Albada slope limiter  algorithm
   SMSWharten    =&gt; Harten slope limiter algorithm
  HYBRID=NOHYBRID/HYBRID/HYBRIDC hybrid scheme (default NOHYBRID)
   NOHYBRID =&gt; no hybrid scheme
   HYBRID   =&gt; hybrid weno/weno_optimal scheme
   HYBRIDC  =&gt; hybrid weno/noweno_central scheme

 External libraries
  TECIO=yes(no) =&gt; on(off) Tecplot IO library linking (default no)

 Provided Rules
  Defualt rule =&gt; <a class="code" href="../../db/db0/group__Program.html#ga2b9da2f4af39abe63547f8240c6e2648" title="OFF is an Open source Finite volumes Fluid dynamics code.">OFF</a>
  help         =&gt; printing this help message
  <a class="code" href="../../db/db0/group__Program.html#ga2b9da2f4af39abe63547f8240c6e2648" title="OFF is an Open source Finite volumes Fluid dynamics code.">OFF</a>          =&gt; building <a class="code" href="../../db/db0/group__Program.html#ga2b9da2f4af39abe63547f8240c6e2648" title="OFF is an Open source Finite volumes Fluid dynamics code.">OFF</a> code
  <a class="code" href="../../db/db0/group__Program.html#gab26dc33da06d747e4982826462b7d43a" title="IBM, Initial and Boundary conditions, Mesh generator for OFF (Open Finite volume Fluid dynamics code)...">IBM</a>          =&gt; building <a class="code" href="../../db/db0/group__Program.html#gab26dc33da06d747e4982826462b7d43a" title="IBM, Initial and Boundary conditions, Mesh generator for OFF (Open Finite volume Fluid dynamics code)...">IBM</a> code
  <a class="code" href="../../db/db0/group__Program.html#ga5025084443394bb3b6df20e67d964d9a" title="POG, Post-processor Output Generator for OFF (Open Finite volume Fluid dynamics code).">POG</a>          =&gt; building <a class="code" href="../../db/db0/group__Program.html#ga5025084443394bb3b6df20e67d964d9a" title="POG, Post-processor Output Generator for OFF (Open Finite volume Fluid dynamics code).">POG</a> code
  cleanobj     =&gt; cleaning compiled <span class="keywordtype">object</span>
  cleanmod     =&gt; cleaning .mod files
  cleanmsg     =&gt; cleaning make-log massage files
  cleanexe     =&gt; cleaning executable files
  clean        =&gt; running cleanobj, cleanmod and cleanmsg
  cleanall     =&gt; running clean and cleanexe
  tar          =&gt; creating a tar archive of the project
  doc          =&gt; building the documentation
</pre></div><h3><a class="anchor" id="Mopts"></a>
Makefile Options</h3>
<p>The makefiles provides several options. These can be divided in make options (compiler choice and compiling options) and in pre-processing options. For the pre-processing options the C pre-process paradigm has been used.</p>
<p>The meaning of the options are:</p>
<ul>
<li><b>Compiler choice:</b><ul>
<li><b>COMPILER=gnu </b> the codes is compiled using GNU gfortran compiler;</li>
<li><b>COMPILER=intel</b> the codes is compiled using Intel Fortran compiler;</li>
<li><b>COMPILER=pgi </b> the codes is compiled using Portland Group Fortran compiler (<em>not yet supported</em>);</li>
<li><b>COMPILER=g95 </b> the codes is compiled using free g95 compiler (<em>not yet supported</em>).</li>
</ul>
</li>
<li><b>Compiling options:</b><ul>
<li><b>DEBUG=yes(no) </b> compilation with (or not) debug symbols;</li>
<li><b>F03STD=yes(no) </b> checking (or not) the compliance to Fortran standard 2003;</li>
<li><b>OPTIMIZE=yes(no)</b> performance-optimized compilation (or not);</li>
<li><b>OPENMP=yes(no) </b> compilation with (or not) OpenMP directives;</li>
<li><b>MPI=yes(no) </b> compilation with (or not) MPI directives.</li>
</ul>
</li>
<li><b>Preprocessing options:</b><ul>
<li><b>R16P=yes(no)</b> activation (or not) support for real with "128 bit" (quadruple precision) representation;</li>
<li><b>NULi=yes(no)</b> nullify i direction integration for 1D or 2D simulation;</li>
<li><b>NULj=yes(no)</b> nullify j direction integration for 1D or 2D simulation;</li>
<li><b>NULk=yes(no)</b> nullify k direction integration for 1D or 2D simulation;</li>
<li><b>PPL=yes(no) </b> activation (or not) the Positivity Preserving Limiter for high order WENO scheme.</li>
<li><b>WENO=WENO/WENOZ/WENOM WENO</b> WENO algorithm:<ul>
<li><b>WENO </b> original Jiang-Shu sheme;</li>
<li><b>WENOZ</b> improved Borges-Carmona-Costa-Don scheme;</li>
<li><b>WENOM</b> improved Henrick-Aslam-Powers scheme.</li>
</ul>
</li>
<li><b>RECV=RECVC/RECVP</b> high order WENO scheme reconstruction variables type:<ul>
<li><b>RECVC</b> reconstruction in (local) characteristic variables;</li>
<li><b>RECVP</b> reconstruction in primitive variables.</li>
</ul>
</li>
<li><b>RSU=HLLCb/HLLCc/HLLCp/HLLCt/HLLCz/EXA/PVL/TR/TS/APRS/ALFR/LF/LFz/ROE</b> Riemann solver algorithm:<ul>
<li><b>HLLCb</b> approximate HLLC solver using BCLC waves speed estimation;</li>
<li><b>HLLCc</b> approximate HLLC solver using CVL waves speed estimation;</li>
<li><b>HLLCp</b> approximate HLLC solver using PVL waves speed estimation;</li>
<li><b>HLLCt</b> approximate HLLC solver using TR waves speed estimation;</li>
<li><b>HLLCz</b> approximate HLLC solver using Z waves speed estimation;</li>
<li><b>EXA </b> exact solver based on u-function iterative solution;</li>
<li><b>PVL </b> approximate PVL (Primitive Variables Linearization) solver;</li>
<li><b>TR </b> approximate TR (Two Rarefaction) solver;</li>
<li><b>TS </b> approximate TS (Two Shock) solver;</li>
<li><b>APRS </b> approximate APRS (Adaptive PVL-TR-TS) solver;</li>
<li><b>ALFR </b> approximate ALFR (Adaptive HLL-TR-TS) solver;</li>
<li><b>LFp </b> approximate local Lax-Friedrichs solver using PVL waves speed estimation;</li>
<li><b>LFz </b> approximate local Lax-Friedrichs solver using Z waves speed estimation;</li>
<li><b>ROE </b> approximate Roe solver.</li>
</ul>
</li>
<li><b>WS=WSu/WSup</b> waves speed estimation algorithm:<ul>
<li><b>WSu </b> WavesSpeed14u or WavesSpeed1234u algorithm;</li>
<li><b>WSup</b> WavesSpeed14up or WavesSpeed1234up algorithm;</li>
</ul>
</li>
<li><b>SMSW=SMSWz/SMSWliu/SMSWvanleer/SMSWvanalbada/SMSWharten</b> smoothness switchg algorithm:<ul>
<li><b>SMSWz </b> Riemann-solver-like algorithm;</li>
<li><b>SMSWliu </b> Liu algorithm;</li>
<li><b>SMSWvanleer </b> van Leer slope limiter algorithm;</li>
<li><b>SMSWvanAlbada</b> van Albada slope limiter algorithm;</li>
<li><b>SMSWharten </b> Harten slope limiter algorithm.</li>
</ul>
</li>
<li><b>HYBRID=NOHYBRID/HYBRID/HYBRIDC</b>: hybrid (WENO/Central) scheme:<ul>
<li><b>NOHYBRID</b> no hybrid scheme;</li>
<li><b>HYBRID </b> hybrid weno/weno_optimal scheme;</li>
<li><b>HYBRIDC </b> hybrid weno/noweno_central scheme. </li>
</ul>
</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="Mrules"></a>
Makefile Rules</h3>
<p>The makefiles provides several rules. Their meanings are:</p>
<ul>
<li><b>help </b>: print help message in the shell prompt providing informations about the options and the rules available;</li>
<li><b>OFF </b>: build OFF code according to the options chosen; the parallel options OPENMPI and MPI can be used;</li>
<li><b>IBM </b>: build IBM code according to the options chosen; IBM has no parallel symbols thus activating the parallel options OPENMPI and MPI has no sense;</li>
<li><b>POG </b>: build POG code according to the options chosen; POG has only OPENMPI symbols thus activating the parallel option MPI has no sense;</li>
<li><b>cleanobj</b>: clean compiled object file .o that are saved in obj directory by default;</li>
<li><b>cleanmod</b>: clean modules files .mod that are saved in obj directory by default;</li>
<li><b>cleanmsg</b>: clean log massage files of the make compilation that are "error_message" and "diagnostic_messages";</li>
<li><b>cleanexe</b>: clean executable files OFF, IBM and POG that are stored in ./ by default;</li>
<li><b>clean </b>: execute cleanobj, cleanmod and cleanmsgr;</li>
<li><b>cleanall</b>: execute clean and cleanexe;</li>
<li><b>tar </b>: create a tar archive containing input lib util and src directories and makefile;</li>
<li><b>doc </b>: build the documentation (by means doxygen) in the directory doc/html.</li>
</ul>
<dl class="note"><dt><b>Note:</b></dt><dd>In order to build the documentation the following dependences must be satisfied:<ul>
<li>.doxigenconfig file must be in project main directory;</li>
<li>doc directory with doc/fpp.sh, <a class="el" href="../../d8/d0b/mainpage_8txt.html">doc/mainpage.txt</a> and doc/off-layout.xml files must be in project main directory;</li>
<li>doxygen program must be installed (<a href="http://www.stack.nl/~dimitri/doxygen/">http://www.stack.nl/~dimitri/doxygen/</a>). </li>
</ul>
</dd>
<dd>
All of the above pre-requisites are satisfied if the GitHub repository (<a href="https://github.com/szaghi/OFF">https://github.com/szaghi/OFF</a>) is cloned. <br/>
 <br/>
 </dd>
<dd>
POG code can produce Tecplot binary files. To this aim the proprietary library tecio.a (or tecio64.a) from Tecplot Inc. company must be available (these libraries are shipped within Tecplot installer or they can be freely downloaded from <a href="http://download.tecplot.com/tecio/">http://download.tecplot.com/tecio/</a>). By default the provided makefile search this libraries in ./lib/. The makefile try to recognized the type of OS (32 or 64 bit) by means of the <em>getconf LONG_BIT</em> shell command. According to the result of this command the library lib/32bit/tecio.a or lib/64bit/tecio64.a is passed to the linker. Note that for complete the building with these libraries the standard c++ library stdc++5 must be explicitly passed to the linker. The author prefers to put this last system library into the directories lib/32bit/ and lib/64bit/ to facilitate the makefile searching. The user must provide the necessary libraries and he must update the makefile with the correct paths. </dd></dl>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Fri Oct 26 2012 13:08:33 for OFF by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
