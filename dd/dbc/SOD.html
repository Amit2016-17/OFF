<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>OFF: 1D Example: SOD shock tube</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OFF
   </div>
   <div id="projectbrief">an Open source Finite volumes Fluid dynamics code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>README</span></a></li>
      <li><a href="../../modules.html"><span>API</span></a></li>
      <li><a href="../../files.html"><span>Source&#160;Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dd/dbc/SOD.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">1D Example: SOD shock tube </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How to simulate 1D SOD shock tube problem</p>
<h1><a class="anchor" id="RiemannP"></a>
Riemann Problem definition</h1>
<p>A shock tube test consists in a one dimensional Riemann Problem with non reflective boundary conditions. A Riemann Problem could be defined as following. Assuming that the conservation laws <img class="formulaInl" alt="$ \frac{\partial }{{\partial t}}\int\limits_{{V_{ijk}}} {\overrightarrow U d{V_{ijk}}} = R\left( {\overrightarrow U } \right) $" src="../../form_354.png"/> in the space domain [0,1], are coupled with the following initial conditions:</p>
<p><img class="formulaInl" alt="$ U\left( {x,t = 0} \right) = {U_0}\left( x \right) = \left\{ \begin{array}{l} {U_L}\,x < x_0\\ {U_R}\,x > x_0 \end{array} \right. $" src="../../form_355.png"/> <br/>
 where <img class="formulaInl" alt="$U_L$" src="../../form_356.png"/> and <img class="formulaInl" alt="$U_R$" src="../../form_357.png"/> are two constant values of the conservative variables and <img class="formulaInl" alt="$x_0$" src="../../form_301.png"/> is the abscissa of the interface, the Riemann Problem can be defined as a partial derivative problem coupled with a piecewise constant initial conditions having a single discontinuity. Solving a Riemann Problem consists to find the time evolution, according to the conservative laws, of the discontinuity on the initial conditions. The structure of the solution of the Riemann Problem for the Euler conservation is composed by three waves. The middle wave (traveling along <img class="formulaInl" alt="$v$" src="../../form_358.png"/>) is always a contact discontinuity while the left and right waves (traveling along <img class="formulaInl" alt="$v \pm a$" src="../../form_359.png"/>, being <img class="formulaInl" alt="$a=\sqrt{\frac{\gamma p}{\rho}}$" src="../../form_360.png"/> the speed of sound) are the non-linear acoustic waves and they can be either a shocks or rarefactions. Therefore there are four possible wave patterns.</p>
<h1><a class="anchor" id="SodST"></a>
Sod's shock tube</h1>
<p>The Sod's shock tube is defined (in terms of primitive variables, <a class="el" href="../../dc/d67/group__Data__Type__PrimitiveDerivedType.html#df/db5/structdata__type__primitive_1_1type__primitive">see definition of primitive derived type</a>) as:</p>
<ul>
<li>Left state: <img class="formulaInl" alt="$P_L = \left[ {\begin{array}{*{20}{c}} \rho \\ {v}\\ {p} \end{array}} \right]=\left[ {\begin{array}{*{20}{c}} 1 \\ 0\\ 1 \end{array}} \right]$" src="../../form_361.png"/></li>
<li>Right state: <img class="formulaInl" alt="$P_R = \left[ {\begin{array}{*{20}{c}} \rho \\ {v}\\ {p} \end{array}} \right]=\left[ {\begin{array}{*{20}{c}} 0.125 \\ 0\\ 0.1 \end{array}} \right]$" src="../../form_362.png"/></li>
</ul>
<p>After the rupture of the initial discontinuity the solution consists in a shock moving to the right, a rarefaction fan moving to left and a contact discontinuity, moving to the right, separating the left and right states.</p>
<h1><a class="anchor" id="Compiling"></a>
Compiling Instructions</h1>
<p>Before running this example the IBM, <em>OFF</em> and POG codes must be properly compiled.</p>
<p>For more details see <a class="el" href="../../dd/dbc/SOD.html">Compiling Instructions</a>. In the following subsections few guidelines are provided. </p>
<h2><a class="anchor" id="CompIBM"></a>
Compiling IBM</h2>
<p>IBM, necessary for building up the initial and boundary conditions and the mesh, could be compiled without any particular options: </p>
<div class="fragment"><div class="line">make IBM DEBUG=no OPTIMIZE=yes</div>
<div class="line">make clean</div>
</div><!-- fragment --><h2><a class="anchor" id="CompOFF"></a>
Compiling OFF</h2>
<p><em>OFF</em> must be compiled with <em>NULj=yes NULk=yes</em> in order to perform a correct 1D simulation. It is possible to compile serial or parallel code:</p>
<p>For serial code: </p>
<div class="fragment"><div class="line">make OFF DEBUG=no OPTIMIZE=yes NULj=yes NULk=yes</div>
<div class="line">make clean</div>
</div><!-- fragment --><p> For multi-processes/multi-threads code: </p>
<div class="fragment"><div class="line">make OFF DEBUG=no OPTIMIZE=yes NULj=yes NULk=yes OPENMP=yes MPI=yes</div>
<div class="line">make clean</div>
</div><!-- fragment --><h2><a class="anchor" id="CompPOG"></a>
Compiling POG</h2>
<p>POG must be compiled with <em>NULj=yes NULk=yes</em> in order to perform a correct 1D post-process. It is possible to compile serial or parallel (only multi-threads) code:</p>
<p>For serial code: </p>
<div class="fragment"><div class="line">make POG DEBUG=no OPTIMIZE=yes NULj=yes NULk=yes</div>
<div class="line">make clean</div>
</div><!-- fragment --><p> For multi-threads code: </p>
<div class="fragment"><div class="line">make OFF DEBUG=no OPTIMIZE=yes NULj=yes NULk=yes OPENMP=yes</div>
<div class="line">make clean</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>If binary Tecplot output is wanted also the option <em>TECIO=yes</em> must be passed.</dd></dl>
<h1><a class="anchor" id="RunSod"></a>
Running the Sod's shock tube example</h1>
<p>To run the Sod's shock tube test enter the following directory: </p>
<div class="fragment"><div class="line">cd examples/1D/shock_tube/SOD/</div>
</div><!-- fragment --><p> There are 3 sub-directories:</p>
<ul>
<li>ibm</li>
<li>off</li>
<li>pog</li>
</ul>
<p>Into each of the above directories there is a bash script, <em> run_[IBM,OFF,POG].sh </em> that help you to complete the simulation. Moreover there are the necessary option files to run each code.</p>
<p>To complete the simulation you must follow 3 steps in the prescribed order:</p>
<ul>
<li>Building initial and boundary conditions and mesh. Into <em>ibm</em> directory there are 6 ascii input files with extension <em> .dat</em>, one symbolic link to IBM code previously compiled, and the script run_IBM.sh. The latter script has one command line argument. If it is invoked without arguments it prints a help message. The command line argument is necessary to distinguish serial simulation from multi-processes one: <div class="fragment"><div class="line">cd <a class="code" href="../../da/d4b/group__IBMProgram.html#gabbca056d298b9d12890d59be016da3f1" title="IBM, Initial and Boundary conditions, Mesh generator for OFF (Open Finite volume Fluid dynamics code)...">ibm</a></div>
</div><!-- fragment --><ul>
<li>For serial simulation: <div class="fragment"><div class="line">run_IBM.sh -no_mpi</div>
</div><!-- fragment --></li>
<li>For multi-processes (MPI) simulation: <div class="fragment"><div class="line">run_IBM.sh -mpi</div>
</div><!-- fragment --> The above commands will produce the correct input for <em>OFF</em>. The produced files are placed into <em>output</em> directory inside ibm one. Exit from ibm directory:<div class="fragment"><div class="line">cd ../</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Running <em>OFF</em>. off directory contains 2 symbolic link, one to <em> ../ibm/output </em> and one to OFF code previously compiled. There are also an ascii file <em>off_options.dat</em> containing the main options for <em>OFF</em> and a bash script run_OFF.sh. The latter script is similar to previous run_IBM.sh. If it is invoked without arguments it prints a help message. The command line argument is necessary to distinguish serial simulation from multi-processes one: <div class="fragment"><div class="line">cd <a class="code" href="../../d9/d99/group__OFFProgram.html#gab96c351668e50a49652d8e1afdacbd71" title="OFF is an Open source Finite volumes Fluid dynamics code. ">off</a></div>
</div><!-- fragment --><ul>
<li>For serial simulation: <div class="fragment"><div class="line">run_OFF.sh -no_mpi</div>
</div><!-- fragment --></li>
<li>For multi-processes (MPI) simulation: <div class="fragment"><div class="line">run_OFF.sh -mpi</div>
</div><!-- fragment --> The above commands will perform the simulation. The produced files are placed into <em>output</em> directory inside off one. Exit from off directory:<div class="fragment"><div class="line">cd ../</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Post-processing the simulation, running POG. The pog directory contains 2 symbolic link, one to <em> ../off/output </em> and one to POG code previously compiled. There is also a bash script run_POG.sh. If it is invoked without arguments it prints a help message. The command line argument is necessary to distinguish VTK post-processing to Tecplot one: <div class="fragment"><div class="line">cd <a class="code" href="../../dd/d2d/group__POGProgram.html#ga46694710cb7f34fb88ecdff78148915b" title="POG, Post-processor Output Generator for OFF (Open Finite volume Fluid dynamics code). ">pog</a></div>
</div><!-- fragment --><ul>
<li>For Tecplot post-processing: <div class="fragment"><div class="line">run_POG.sh -tec</div>
</div><!-- fragment --></li>
<li>For VTK post-processing: <div class="fragment"><div class="line">run_POG.sh -vtk</div>
</div><!-- fragment --> The above commands will post-process the simulation results. The produced files are placed into <em>output</em> directory inside pog one. Exit from pog directory:<div class="fragment"><div class="line">cd ../</div>
</div><!-- fragment --> </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d61/Examples.html">Examples of usage</a></li>
    <li class="footer">Generated on Tue Oct 8 2013 10:13:57 for OFF by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
